<a [routerLink]="['/courses', course().id]" class="block h-full group">
  <div class="ios-card bg-white overflow-hidden h-full flex flex-col shadow-lg hover:shadow-2xl transition-shadow duration-300">
      <div class="relative overflow-hidden">
        <img class="w-full h-48 object-cover transition-transform duration-300 ease-in-out group-hover:scale-105" [src]="course().imageUrl" [alt]="course().title">
        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
        
        <div class="absolute top-3 right-3 flex items-center gap-1.5">
          @if(course().subscriptionOnly) {
            <span class="flex items-center gap-1 bg-purple-500 text-white text-xs font-semibold px-2 py-1 rounded-md shadow">
                <i data-lucide="crown" class="w-3.5 h-3.5"></i><span>اشتراکی</span>
            </span>
          }
          @if(course().tags?.includes('پرفروش')) {
            <span class="flex items-center gap-1 bg-amber-400 text-amber-900 text-xs font-semibold px-2 py-1 rounded-md shadow">
              <i data-lucide="star" class="w-3.5 h-3.5"></i><span>پرفروش</span>
            </span>
          }
        </div>

        <div class="absolute bottom-3 right-3 flex items-center gap-2 text-white">
           <div class="flex items-center gap-1 bg-black/40 px-2 py-1 rounded-md text-xs backdrop-blur-sm border border-white/10">
            <i data-lucide="users" class="w-4 h-4"></i>
            <span>{{ course().students }}</span>
          </div>
           <div class="flex items-center gap-1 bg-black/40 px-2 py-1 rounded-md text-xs backdrop-blur-sm border border-white/10">
            <i data-lucide="clock" class="w-4 h-4"></i>
            <span>{{ course().duration }}</span>
          </div>
        </div>
      </div>
      <div class="p-4 flex-grow flex flex-col">
        <span class="text-xs font-semibold text-blue-600">{{ course().category }}</span>
        <h3 class="text-md font-bold text-gray-800 flex-grow mt-2 group-hover:text-blue-700 transition-colors">{{ course().title }}</h3>
        
        <div class="flex items-center mt-3 pt-3 border-t">
          <img [src]="course().instructorImage" class="w-8 h-8 rounded-full object-cover mr-2" [alt]="course().instructor">
          <div class="flex-1">
            <p class="text-sm font-semibold text-gray-700">{{ course().instructor }}</p>
            <div class="flex items-center text-xs text-gray-500">
              <span class="ml-1 text-amber-500"><i data-lucide="star" class="w-4 h-4 lucide-filled"></i></span>
              <span>{{ course().rating }}</span>
              <span class="mr-1">({{ course().reviewCount }} نظر)</span>
            </div>
          </div>
        </div>
        
        <div class="mt-4 text-left">
          @if(course().subscriptionOnly) {
              <span class="text-xl font-bold text-purple-600">ویژه مشترکین</span>
          } @else {
              <span class="text-xl font-extrabold text-gray-900">{{ course().price }}</span>
              <span class="text-sm font-medium text-gray-600 mr-1">تومان</span>
          }
        </div>
      </div>
  </div>
</a>