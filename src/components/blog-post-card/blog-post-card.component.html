<a [routerLink]="['/blog', post().slug]" 
  class="block group h-full"
  [class.p-3]="layout() === 'compact'"
  [class.transition-colors]="layout() === 'compact'"
  [class.hover:bg-gray-50]="layout() === 'compact'"
  [class.rounded-lg]="layout() === 'compact'"
>
  @if (layout() === 'list') {
    <article class="ios-card flex flex-col h-full overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300">
      <div class="w-full h-48 rounded-t-2xl overflow-hidden flex-shrink-0">
        <img class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ease-in-out" [src]="post().imageUrl" [alt]="post().title">
      </div>
      <div class="flex-1 p-5 flex flex-col">
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-blue-600 bg-blue-100 px-3 py-1 rounded-full">{{ post().category }}</span>
          <span class="text-xs text-gray-500 flex items-center gap-1">
             <i data-lucide="clock" class="w-4 h-4"></i>{{ post().readingTime }}
          </span>
        </div>
        <h2 class="mt-3 text-lg font-bold text-gray-800 group-hover:text-blue-700 transition-colors flex-grow">{{ post().title }}</h2>
        <p class="mt-2 text-gray-600 text-sm leading-relaxed">{{ post().excerpt }}</p>
        <div class="mt-4 pt-4 border-t flex items-center justify-between text-xs text-gray-500">
            <div class="flex items-center gap-2">
              <img class="w-6 h-6 rounded-full" [src]="post().authorImage" [alt]="post().author">
              <span>{{ post().author }}</span>
            </div>
            <div class="flex items-center gap-1">
              <i data-lucide="eye" class="w-4 h-4"></i>
              <span>{{ post().views.toLocaleString('fa-IR') }} بازدید</span>
            </div>
        </div>
      </div>
    </article>
  } @else { <!-- compact layout -->
    <article class="flex items-center gap-4">
      <img class="w-20 h-20 rounded-lg object-cover flex-shrink-0" [src]="post().imageUrl" [alt]="post().title">
      <div class="flex-1">
        <span class="text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded-full">{{ post().category }}</span>
        <h3 class="mt-2 text-md font-semibold text-gray-800 group-hover:text-blue-700 transition-colors leading-tight">{{ post().title }}</h3>
        <p class="text-xs text-gray-500 mt-1">{{ post().date }}</p>
      </div>
    </article>
  }
</a>
